package components;


import javafx.util.Duration;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.TimeUnit;

import view.Main;
import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.application.Application;
import javafx.geometry.HPos;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.geometry.VPos;
import javafx.scene.Cursor;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.TextField;
import javafx.scene.image.Image;
import javafx.scene.layout.Background;
import javafx.scene.layout.BackgroundImage;
import javafx.scene.layout.BackgroundPosition;
import javafx.scene.layout.BackgroundRepeat;
import javafx.scene.layout.BackgroundSize;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.shape.Circle;
import javafx.scene.text.Font;
import javafx.scene.text.FontWeight;
import javafx.stage.Stage;
import javafx.application.Application;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.layout.*;
import javafx.scene.paint.Color;
import javafx.scene.shape.Circle;
import javafx.stage.Stage;

public class Board {
	  public StackPane boardRoot;
	  private ArrayList<Circle> circles;
	  private static final int GRID_SIZE = 31;     

	public Board() {
	     StackPane root = new StackPane();
		 GridPane grid = new GridPane();
	        grid.setGridLinesVisible(true);
	        grid.setMaxWidth(300);
	        
	        circles = new ArrayList<Circle>();
	        
	        for (int i = 0; i < GRID_SIZE; i++) {
	            ColumnConstraints cc = new ColumnConstraints();
	            RowConstraints    rc = new RowConstraints();
	            rc.setPercentHeight(100.0/GRID_SIZE);
	            cc.setPercentWidth(100.0/GRID_SIZE );

	            grid.getColumnConstraints().add(cc);
	            grid.getRowConstraints().add(rc);
	        }
	        
		    // first part top left
	        int N = 6;
	        int offsetX = 0;
	        int offsetY = 0;
	        for (int i = 0; i < N; i++) {
	        	createTrackCircle(grid, offsetX + i,offsetY + N-1-i);
	        }
	        
	        
	        // Second part top left
	        offsetX += 6;
	        offsetY = 1;
	        N = 6;
	        for (int i = 0; i < N; i++) {

	        	createTrackCircle(grid, offsetX + i,offsetY + i);
	        }
	        
	      // part top
	        offsetX += 6;
	        offsetY += 5;
	        N = 8;
	        for (int i = 0; i < N; i++) {
	        	createTrackCircle(grid, offsetX + i,offsetY);
	        }
	        
	        
	        // FIRST part top right
	        offsetX += 8;
	        offsetY = 0;
	        N= 6;
	        for (int i = 0; i < N; i++) {

	        	createTrackCircle(grid, offsetX + i,offsetY + N-1-i);
	        }
	        
	        // Second part top right
	        offsetX += 6;
	        offsetY = 1;
	        N = 5;
	        for (int i = 0; i < N; i++) {

	        	createTrackCircle(grid, offsetX + i,offsetY + i);
	        }
	        
	        // THIRD part top right
	        offsetX += 3;
	        offsetY += 5;
	        N= 6;
	        for (int i = 0; i < N; i++) {

	        	createTrackCircle(grid, offsetX - i,offsetY + i);
	        }
	        
		    // part right
	        offsetX -= 5;
	        offsetY += 6;
	        N = 7;
	        for (int i = 0; i < N; i++) {
	        	createTrackCircle(grid, offsetX,offsetY + i);
	        }
	        // first part bottom right

	        offsetY += 7;

	        N = 6;
	        for (int i = 0; i < N; i++) {

	        	createTrackCircle(grid, offsetX + i,offsetY + i);
	        }
	        
	     // Second part bottom right
	        offsetX += 6;
	        offsetY += 6;
	        N= 6;
	        for (int i = 0; i < N; i++) {

	        	createTrackCircle(grid, offsetX - i,offsetY + i);
	        }
	     // third part bottom right
	        offsetX -= 6;
	        offsetY += 4;
	        N= 6;
	        for (int i = 0; i < N; i++) {

	        	createTrackCircle(grid, offsetX - i,offsetY - i);
	        }
	        
		    // part bottom
	        offsetX -= 6;
	        offsetY -= 5;
	        N = 8;
	        for (int i = 0; i < N; i++) {
	        	createTrackCircle(grid, offsetX - i,offsetY);
	        }
	        // first part top left
	        offsetX -= 8;
	        offsetY += 1;
	        N= 6;
	        for (int i = 0; i < N; i++) {

	        	createTrackCircle(grid, offsetX - i,offsetY + i);
	        }
		    // second part bottom left
	        offsetX -= 6;
	        offsetY += 4;
	        N= 5;
	        for (int i = 0; i < N; i++) {

	        	createTrackCircle(grid, offsetX - i,offsetY - i);
	        }
	     // third part bottom left

	        offsetX = 1;
	        offsetY -= 10;
	        N= 6;
	        for (int i = 0; i < N; i++) {

	        	createTrackCircle(grid, offsetX + i,offsetY + N-1-i);
	        }
		    // part left
	        offsetX += 5;
	        offsetY -= 1;
	        N = 7;
	        for (int i = 0; i < N; i++) {
	        	createTrackCircle(grid, offsetX,offsetY - i);
	        }
	        
		     // third part left right
	        offsetY -= 7;
	        N= 6;
	        for (int i = 0; i < N; i++) {

	        	createTrackCircle(grid, offsetX - i,offsetY - i);
	        }
	        
	        //base cell 1
	        createBaseCircle(grid, 11,2);
	        createBaseCircle(grid, 12,2);
	        createBaseCircle(grid, 11,3);
	        createBaseCircle(grid, 12,3);
	        
	      //base cell 2
	        createBaseCircle(grid, 27,11);
	        createBaseCircle(grid, 28,11);
	        createBaseCircle(grid, 27,12);
	        createBaseCircle(grid, 28,12);
	        
	      //base cell 3
	        createBaseCircle(grid, 18,27);
	        createBaseCircle(grid, 19,27);
	        createBaseCircle(grid, 18,28);
	        createBaseCircle(grid, 19,28);
	        
	      //base cell 4
	        createBaseCircle(grid, 2, 18);
	        createBaseCircle(grid, 3, 18);
	        createBaseCircle(grid, 2, 19);
	        createBaseCircle(grid, 3, 19);
	        
	       
	      //safe cell 1
	        createSafeCircle(grid, 3,26);
	        createSafeCircle(grid, 4,25);
	        createSafeCircle(grid, 5,24);
	        createSafeCircle(grid, 6,23);
	      //safe cell 2
	        createSafeCircle(grid, 26,27);
	        createSafeCircle(grid, 25,26);
	        createSafeCircle(grid, 24,25);
	        createSafeCircle(grid, 23,24);
	      //safe cell 3
	        createSafeCircle(grid, 27,4);
	        createSafeCircle(grid, 26,5);
	        createSafeCircle(grid, 25,6);
	        createSafeCircle(grid, 24,7);
	        
	      //safe cell 4
	        createSafeCircle(grid, 4,3);
	        createSafeCircle(grid, 5,4);
	        createSafeCircle(grid, 6,5);
	        createSafeCircle(grid, 7,6);
	        
	        grid.setPadding(new Insets(5));

	        

	        root.getChildren().add(grid);

	        
//	        Timeline timeline = new Timeline();
//	        for (int i = 0; i < circles.size(); i++) {
//	            Circle c = circles.get(i);
//	            KeyFrame kf = new KeyFrame(
//	                Duration.seconds(i * 0.5),
//	                e -> c.setFill(Color.YELLOW)
//	            );
//	            timeline.getKeyFrames().add(kf);
//	        }
//	       
//	        timeline.play();
	        Image backgroundImage = new Image("jackaroo_board.png");
	        BackgroundImage bgImage = new BackgroundImage(
	            backgroundImage,
	            BackgroundRepeat.NO_REPEAT,
	            BackgroundRepeat.NO_REPEAT,
	            BackgroundPosition.DEFAULT,
	            new BackgroundSize(
	                100, 100, true, true, true, true
	            )
	        );
	        root.setBackground(new Background(bgImage));
//	        
		     this.boardRoot = root;
		     
		    




	}
    // Build a Timeline that “lights up” one circle every 0.5s
	

	
    private void createTrackCircle(GridPane grid,int motionX,int motionY) {
    	Circle circle = new Circle(6, Color.BROWN);
        circle.setStroke(Color.DARKGREEN);    
        StackPane cell = new StackPane(circle);
        grid.add(cell, motionX,motionY);
        GridPane.setHalignment(circle, HPos.CENTER);
        GridPane.setValignment (circle, VPos.CENTER);
        circles.add(circle);
    }
    private void createBaseCircle(GridPane grid,int motionX,int motionY) {
    	Circle circle = new Circle(6, Color.BLUE);
        circle.setStroke(Color.DARKGREEN);    
        StackPane cell = new StackPane(circle);
        grid.add(cell, motionX,motionY);
        GridPane.setHalignment(circle, HPos.CENTER);
        GridPane.setValignment (circle, VPos.CENTER);

    }
    private void createSafeCircle(GridPane grid,int motionX,int motionY) {
    	Circle circle = new Circle(6, Color.YELLOW);
        circle.setStroke(Color.DARKGREEN);    
        StackPane cell = new StackPane(circle);
        grid.add(cell, motionX,motionY);
        GridPane.setHalignment(circle, HPos.CENTER);
        GridPane.setValignment (circle, VPos.CENTER);

    }



}
